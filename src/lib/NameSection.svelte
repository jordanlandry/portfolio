<script lang="ts">
  import { onDestroy, onMount } from "svelte";

  let scrollPercent = 0;
  let maxScroll = window.innerHeight;

  const handleScroll = () => scrollPercent = window.scrollY / maxScroll;
  const handleResize = () => maxScroll = window.innerHeight;

  onMount(() => {
    window.addEventListener('scroll', handleScroll);
    window.addEventListener('resize', handleResize);

  })

  onDestroy(() => {
    window.removeEventListener('scroll', handleScroll);
    window.removeEventListener('resize', handleResize);
  })
</script>

{#if scrollPercent < 1}
<!-- <div class=name-wrapper > -->
  <div class=name-wrapper style="opacity: {1 - scrollPercent}; transform: translate(-50%, -50%) scale({1 - (scrollPercent / 2)})">
    <div class=full-name>
      <svg xmlns="http://www.w3.org/2000/svg" width="359" height="319" viewBox="0 0 359 319" fill="none">
        <path id=signature-firstname d="M57 173C52.8777 168.878 48.1885 164.321 43.5555 160.778C36.0457 155.035 31.722 147.444 27.5555 139.111C13.6037 111.207 13.7241 74.6845 22.2222 45.1111C26.0375 31.834 31.9427 17.18 43.6667 8.77777C54.3078 1.15161 63.9459 0.793957 75.7778 6C90.8837 12.6466 99.2844 30.343 103.778 45C110.831 68.0067 112.495 92.696 110 116.556C104.296 171.102 95.1501 226.047 66.2222 273.889C56.6059 289.793 40.3257 307.406 22.5555 314.222C12.91 317.922 1.53775 316.838 3.22221 304.111C5.38886 287.741 18.3261 276.186 31.1111 267.222C46.5795 256.377 63.2917 247.354 80.8889 240.556C100.975 232.795 121.828 231.285 142.889 228.944C149.602 228.199 154.342 223.508 156.556 217.5C157.864 213.948 158.355 203.864 151.5 207.556C140.93 213.247 129.659 242.711 147.444 245.944C153.163 246.984 156.577 233.734 156.944 230.056C157.5 224.499 158.321 215.578 155.5 210.5C153.267 206.481 147.781 210.434 151.5 212.5C156.134 215.075 163.904 210.173 168 208.222C169.943 207.297 180.261 202.311 180 207C179.763 211.27 175.785 216.275 174.778 220.556C174.528 221.616 173.105 231.556 174.222 231.556C176.801 231.556 181.572 220.181 182.778 218.444C186.389 213.244 188.971 207.584 193.556 203C198.107 198.448 197 208.826 197 211C197 216.29 195.789 218.673 201 215.778C205.302 213.388 208.539 206.158 213.5 205.056C220.019 203.607 211.474 225.092 211 224.5C208.33 221.163 213.408 218.341 215 215.556C215.589 214.524 221.407 207.704 217.556 211.556C211.84 217.271 206.066 229.694 218.444 231.944C225.106 233.156 230.347 222.137 231.444 217.278C235.283 200.279 232.772 181.413 232.056 164.222C231.357 147.459 233.461 129.749 230.5 113.167C230.027 110.518 230 102.421 230 105.111C230 110.114 229.558 114.871 229.944 119.889C231.236 136.674 232.564 153.141 235.5 169.778C238.49 186.724 241 204.865 241 222.111C241 231.403 240.458 240.272 239.056 249.389C238.213 254.865 243.598 239.234 245.056 233.889C247.809 223.794 252.311 215.123 253.056 204.333C253.121 203.39 257.421 182.758 259.778 187C262.613 192.103 262.112 227.666 270.778 224.778C278.177 222.312 297.86 191.62 287.222 192C278.142 192.324 271.618 203.492 268.222 210.556C266.463 214.214 263.561 228.167 272.222 225.778C285.889 222.008 297.845 175.343 293 188.667C289.835 197.372 289.438 206.583 287.5 215.5C286.249 221.253 290.725 227.447 295 220.5C301.298 210.266 304.947 199.883 310 189.056C311.581 185.668 313.259 181.452 315.556 178.5C316.809 176.888 317.937 175.913 316.5 178.5C313.589 183.739 299.348 220.72 312.667 218.944C325.982 217.169 336.098 203.171 347.833 197.722C357.485 193.241 356 205.154 356 211" stroke="black" stroke-width="5" stroke-linecap="round"/>
      </svg>
      <svg xmlns="http://www.w3.org/2000/svg" width="370" height="228" viewBox="0 0 370 228" fill="none">
        <path id=signature-lastname d="M6.8174 76.8514C7.16956 73.6819 15.7064 74.6083 18.0746 74.1964C27.9947 72.4712 36.3385 70.3701 44.7307 64.2668C60.11 53.0818 75.7839 34.9364 79.6704 15.8928C80.3021 12.7977 80.69 6.34344 77.7588 3.99844C73.8429 0.865699 69.9446 12.3311 69.4221 14.2467C66.848 23.6852 64.6638 32.2261 65.1741 42.1772C65.8421 55.202 68.5588 68.1325 71.5992 80.7808C77.7645 106.428 71.0042 127.8 57.9525 150.023C49.8875 163.755 41.7754 177.329 29.7565 188.096C24.0197 193.235 13.5567 203.802 4.9058 203.548C-0.72414 203.382 8.68808 189.286 9.47239 188.149C18.8794 174.509 31.8682 163.069 43.828 151.722C53.1266 142.9 62.4908 134.407 72.7674 126.765C79.3063 121.903 76.2587 122.621 71.8116 127.562C67.7977 132.022 42.7977 170.537 61.2978 171.051C69.9429 171.291 77.4212 162.862 81.7944 156.501C86.8408 149.161 92.8248 140.662 93.7418 131.491C94.3025 125.884 91.3609 127.672 89.016 130.854C85.1957 136.039 84.9254 140.236 87.1044 146.2C88.7947 150.826 93.8778 156.701 99.4766 155.652C105.152 154.587 108.274 148.91 111.212 144.713C114.354 140.224 116.937 135.281 119.389 130.376C120.836 127.482 117.77 136.703 116.256 139.562C114.518 142.846 114.039 148.966 114.876 152.731C115.657 156.247 122.852 144.579 123.212 143.97C125.855 139.498 128.062 134.197 131.814 130.588C136.763 125.83 133.197 135.832 132.983 137.12C132.706 138.78 128.525 149.387 130.115 150.235C132.224 151.36 141.961 137.15 143.019 135.633C146.247 131.001 150.501 124.858 154.966 121.349C159.754 117.587 153.083 130.69 152.523 131.65C148.742 138.132 144.524 143.873 142.328 151.191C140.119 158.555 149.165 152.195 151.302 150.235C173.663 129.738 189.151 99.7089 189.375 69.0989C189.457 57.8084 188.787 46.6609 188.419 35.4336C188.396 34.7256 187.463 30.0985 187.463 31.1325C187.463 34.5663 187.463 38 187.463 41.4338C187.463 54.2279 186.855 67.2785 186.454 80.0905C185.866 98.9032 181.193 116.756 176.949 134.943C174.843 143.968 172.531 152.905 170.471 161.917C168.728 169.546 173.161 159.696 174.188 157.935C178.54 150.475 182.344 141.793 185.551 133.774C187.583 128.695 195.69 114.628 192.03 118.694C188.21 122.939 186.956 131.5 185.605 136.907C184.923 139.635 181.614 148.705 183.852 151.191C185.523 153.047 203.112 124.668 205.039 121.455C208.945 114.946 204.185 131.726 203.287 134.677C202.288 137.961 202.376 144.582 207.216 143.545C215.128 141.85 220.747 133.579 226.014 128.146C232.633 121.316 236.534 113.252 242.421 106.056C244.229 103.847 242.987 107.419 242.687 108.393C241.202 113.219 237.733 118.301 235.465 122.836C229.278 135.21 223.656 147.986 216.987 160.112C214.394 164.827 208.703 178.392 202.278 179.069C193.47 179.996 202.153 164.039 203.712 160.962C208.738 151.04 217.92 141.223 225.695 133.243C226.153 132.774 230.107 128.167 230.793 128.624C231.204 128.898 225.297 136.499 224.952 136.907C209.751 154.872 195.99 173.869 180.348 191.494C173.363 199.364 166.229 207.046 158.789 214.486C157.813 215.463 145.903 226.193 145.833 224.363C145.778 222.943 147.165 221.132 147.904 220.168C152.853 213.706 158.841 207.913 164.524 202.114C187.106 179.071 211.397 157.177 237.696 138.447C262.273 120.943 288.011 105.53 314.584 91.2946C332.757 81.5592 351.584 72.9962 368.109 60.6029" stroke="black" stroke-width="5"/>
      </svg>
    </div>
    <p class=name-title>Front-end Developer ~ React / Vue / Svelte</p>
  </div>
<!-- </div> -->
{/if}


<style>
  #signature-firstname {
    stroke-dasharray: 1820;  /* Found from element.getTotalLength() */
    stroke-dashoffset: 1820;
    animation: draw 1s linear forwards;
  }

  #signature-lastname {
    stroke-dasharray: 1842;     /* Found from element.getTotalLength() */
    stroke-dashoffset: 1842;
    animation: draw 1s linear forwards;

    animation-delay: 1s;      /* Wait for previous anim to finish */
  }

  .name-title {
    opacity: 0;
    animation: fade-in 1s ease-in-out forwards;
    animation-delay: 3s;  /* Wait for previous anims to finish */
  }

  @keyframes draw {
    to {
      stroke-dashoffset: 0;
    }
  }

  .full-name {
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .name-wrapper {
    display: flex;
    flex-direction: column;
    position: fixed;
    margin-bottom: 100vh;
    font-size: 2.75rem;
    top: 50%;
    left: 50%;
    z-index: 0;
  }

  .name-title {
    font-size: 2.75rem;
    text-align: center;
  }

  @keyframes fade-in {
    0% {
      opacity: 0;
      transform: translateY(50px);
    }

    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @media screen and (max-width: 768px) {
    .name-wrapper {
      font-size: 1.75rem;
    }

    .name-title {
      font-size: 2rem;
    }
  }

  @media screen and (max-width: 500px) {
    .name-wrapper {
      font-size: 1.25rem;
    }

    .name-title {
      font-size: 1.7rem;
    }
  }

</style>